# ================================
# SOKOL LEARNING PLATFORM - Environment Configuration
# Phase 5: Advanced Analytics & Adaptive Intelligence
# ================================

# Server Configuration
NODE_ENV=development
PORT=3001
API_VERSION=v1

# Clerk Configuration
CLERK_PUBLISHABLE_KEY=pk_test_Z3JhdGVmdWwtYWtpdGEtODkuY2xlcmsuYWNjb3VudHMuZGV2JA
CLERK_SECRET_KEY=sk_test_D78qvECGBWVYoB2IXZY7Li1J5p7RXoVHF8bxX7MdHi

# Clerk Webhook (you'll get this after setting up webhooks in Clerk Dashboard)
CLERK_WEBHOOK_SECRET=whsec_zwagDBJwMoXT5jjc598LGLFCR4Afgdrh

# Database Configuration
# Using local MongoDB
MONGODB_URI=mongodb+srv://sokol:Sokolca23@cluster0.6madhro.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
# MongoDB Atlas (uncomment if you want to use cloud instead)
# MONGODB_URI=mongodb+srv://corp1o1:sokol@cluster0.gojkk4r.mongodb.net/sokol?retryWrites=true&w=majority
MONGODB_TEST_URI=mongodb://localhost:27017/sokol_test
MONGODB_PROD_URI=mongodb://localhost:27017/sokol_prod

# Database Options
DB_MAX_POOL_SIZE=10
DB_MIN_POOL_SIZE=5
DB_MAX_IDLE_TIME=30000
DB_SERVER_SELECTION_TIMEOUT=5000

# JWT Configuration
JWT_SECRET=your_super_secure_jwt_secret_key_here_please_change_in_production_256_bits_minimum
JWT_REFRESH_SECRET=your_super_secure_refresh_secret_key_here_also_change_in_production
JWT_EXPIRE=24h
JWT_REFRESH_EXPIRE=7d
JWT_ISSUER=sokol-learning-platform
JWT_AUDIENCE=sokol-users

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_SECRET=your_session_secret_key_here_change_in_production
CRYPTO_SECRET_KEY=your_crypto_secret_for_sensitive_data_encryption

# CORS Configuration
FRONTEND_URL=http://localhost:3000
ADMIN_FRONTEND_URL=http://localhost:3002
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002,http://127.0.0.1:3000,http://127.0.0.1:3001

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# AI Chat Specific Rate Limiting
AI_CHAT_RATE_LIMIT_WINDOW_MS=900000
AI_CHAT_RATE_LIMIT_MAX_REQUESTS=30

# Analytics Rate Limiting
ANALYTICS_RATE_LIMIT_WINDOW_MS=900000
ANALYTICS_RATE_LIMIT_MAX_REQUESTS=50

# OpenAI Configuration

OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=1500
OPENAI_TEMPERATURE=0.1
OPENAI_TIMEOUT=30000

# Advanced OpenAI Service Configuration - Optimized for Cost & Performance
# Model Selection (2025 Best Practices)
OPENAI_MODEL_ASSESSMENT=gpt-4o
OPENAI_MODEL_EVALUATION=gpt-4o
OPENAI_MODEL_CONVERSATION=gpt-4o-mini
OPENAI_MODEL_ANALYSIS=gpt-4o-mini

# Temperature Settings for Different Tasks
OPENAI_TEMP_ASSESSMENT=0.5
OPENAI_TEMP_EVALUATION=0.2
OPENAI_TEMP_CONVERSATION=0.7
OPENAI_TEMP_ANALYSIS=0.4

# AI Personality Temperature Settings
OPENAI_TEMP_ARIA=0.9
OPENAI_TEMP_SAGE=0.3
OPENAI_TEMP_COACH=0.7

# Token Limits for Cost Control
OPENAI_MAX_TOKENS_ASSESSMENT=2000
OPENAI_MAX_TOKENS_CONVERSATION=500
OPENAI_MAX_TOKENS_EVALUATION=1000

# Performance Optimization
OPENAI_CACHE_TTL=300
OPENAI_ENABLE_BATCH_API=true
OPENAI_ENABLE_LOGPROBS=true
OPENAI_TOP_LOGPROBS=5
OPENAI_PRESENCE_PENALTY=0.1
OPENAI_FREQUENCY_PENALTY=0.1

# Legacy Model Names (kept for backward compatibility)
OPENAI_EVALUATION_MODEL=gpt-4o
OPENAI_ANALYSIS_MODEL=gpt-4o-mini
OPENAI_RECOMMENDATIONS_MODEL=gpt-4o

# AI Evaluation Service Settings
AI_DEFAULT_PROVIDER=openai
AI_DEFAULT_MODEL=gpt-4o
AI_CONFIDENCE_THRESHOLD=60
AI_HUMAN_REVIEW_THRESHOLD=30
AI_BATCH_SIZE=10
AI_PROCESSING_TIMEOUT=45000

# Email Configuration
EMAIL_SERVICE=gmail
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password_here
EMAIL_FROM_NAME=Sokol Learning Platform
EMAIL_FROM_ADDRESS=noreply@sokol-learning.com

# File Upload Configuration
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,txt
IMAGE_QUALITY=80
IMAGE_MAX_WIDTH=1920
IMAGE_MAX_HEIGHT=1080

# Redis Configuration (for caching and sessions)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# Session Store Configuration
SESSION_STORE=memory
SESSION_MAX_AGE=86400000
SESSION_CLEANUP_INTERVAL=3600000

# Analytics Configuration
ANALYTICS_PROCESSING_INTERVAL=1800000
ANALYTICS_DAILY_PROCESSING_HOUR=2
ANALYTICS_DATA_RETENTION_DAYS=365
ANALYTICS_BATCH_SIZE=100

# Background Jobs Configuration
JOBS_CONCURRENCY=5
JOBS_MAX_RETRIES=3
JOBS_RETRY_DELAY=5000

# Recommendation Engine Configuration
RECOMMENDATION_MAX_ACTIVE=10
RECOMMENDATION_DEFAULT_VALIDITY_DAYS=14
RECOMMENDATION_CONFIDENCE_THRESHOLD=60

# Adaptation Engine Configuration
ADAPTATION_PROCESSING_ENABLED=true
ADAPTATION_RULE_COOLDOWN_HOURS=24
ADAPTATION_MAX_TRIGGERS_PER_USER=10

# Learning Analytics Configuration
LEARNING_ANALYTICS_ENABLED=true
LEARNING_ANALYTICS_REAL_TIME=true
LEARNING_ANALYTICS_BATCH_PROCESSING=true

# Prediction Models Configuration
PREDICTION_MODELS_ENABLED=true
PREDICTION_CONFIDENCE_THRESHOLD=70
PREDICTION_HORIZON_DAYS=30

# Monitoring and Logging
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_PATH=./logs/app.log
LOG_ERROR_FILE_PATH=./logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# Performance Monitoring
PERFORMANCE_MONITORING=true
RESPONSE_TIME_THRESHOLD=2000
MEMORY_USAGE_THRESHOLD=85
CPU_USAGE_THRESHOLD=80

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# API Documentation
API_DOCS_ENABLED=true
API_DOCS_PATH=/api/docs
API_DOCS_TITLE=Sokol Learning Platform API
API_DOCS_VERSION=1.0.0

# Webhook Configuration
WEBHOOK_SECRET=your_webhook_secret_here
WEBHOOK_TIMEOUT=10000

# External Services
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key

# Social Auth (Optional)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# Feature Flags
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_ADAPTIVE_DIFFICULTY=true
FEATURE_PEER_LEARNING=false
FEATURE_GAMIFICATION=false
FEATURE_OFFLINE_MODE=false

# Development Tools
DEBUG=sokol:*
ENABLE_CORS=true
TRUST_PROXY=false

# Testing Configuration
TEST_TIMEOUT=10000
TEST_DB_URL=mongodb://localhost:27017/sokol_test
JEST_TIMEOUT=30000

# Production Overrides (uncomment for production)
# NODE_ENV=production
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/sokol_prod
# FRONTEND_URL=https://app.sokol-learning.com
# LOG_LEVEL=warn
# RATE_LIMIT_MAX_REQUESTS=1000
# ANALYTICS_PROCESSING_INTERVAL=600000

# Security Headers
HELMET_ENABLED=true
CSP_ENABLED=true
HSTS_MAX_AGE=31536000
REFERRER_POLICY=strict-origin-when-cross-origin

# Data Privacy
DATA_ENCRYPTION_ENABLED=true
PII_ANONYMIZATION=true
GDPR_COMPLIANCE=true
DATA_RETENTION_POLICY=true

# Backup Configuration
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups

# Clustering (for production scaling)
CLUSTER_ENABLED=false
CLUSTER_WORKERS=auto
CLUSTER_RESTART_DELAY=1000

# ================================
# IMPORTANT SECURITY NOTES:
# 1. Change all default secrets and keys in production
# 2. Use strong, randomly generated passwords
# 3. Enable HTTPS in production
# 4. Use environment-specific configurations
# 5. Never commit real secrets to version control
# 6. Use a secrets management service in production
# ================================
# pA2pIXg55sdNd6E6